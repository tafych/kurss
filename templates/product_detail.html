{% extends "base.html" %}

{% block title %}{{ product.name }} - –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞{% endblock %}

{% block content %}
<div class="container">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('search') }}">–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">{{ product.name }}</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h5 class="card-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                                    <ul class="list-unstyled mb-0">
                                        <li class="mb-2">
                                            <strong>–ê—Ä—Ç–∏–∫—É–ª:</strong>
                                            <span class="badge bg-secondary ms-2">{{ product.sku }}</span>
                                        </li>
                                        <li class="mb-2">
                                            <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong>
                                            <span class="badge bg-info ms-2">
                                                {{ product.category.name if product.category else '–ù–µ —É–∫–∞–∑–∞–Ω–∞' }}
                                            </span>
                                        </li>
                                        <li class="mb-2">
                                            <strong>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:</strong>
                                            <span class="ms-2">{{ product.created_at.strftime('%d.%m.%Y') }}</span>
                                        </li>
                                        <li class="mb-2">
                                            <strong>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:</strong>
                                            <span class="badge bg-warning ms-2">{{ product.views_count }}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body">
                                    <h5 class="card-title">–ù–∞–ª–∏—á–∏–µ –∏ —Ü–µ–Ω–∞</h5>
                                    <div class="text-center">
                                        <h2 class="text-success mb-3">{{ "%.2f"|format(product.price) }} ‚ÇΩ</h2>
                                        {% if product.quantity > 10 %}
                                        <span class="badge bg-success fs-6 p-3">–í –Ω–∞–ª–∏—á–∏–∏: {{ product.quantity }} —à—Ç.</span>
                                        {% elif product.quantity > 0 %}
                                        <span class="badge bg-warning fs-6 p-3">–ú–∞–ª–æ: {{ product.quantity }} —à—Ç.</span>
                                        {% else %}
                                        <span class="badge bg-danger fs-6 p-3">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5 class="card-title">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h5>
                        <div class="card">
                            <div class="card-body">
                                <p class="card-text">{{ product.description }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5 class="card-title">üìã –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h5>
                        <div class="card">
                            <div class="card-body">
                                {% if product.detailed_specs %}
                                <pre class="card-text" style="white-space: pre-wrap; font-family: inherit;">{{ product.detailed_specs }}</pre>
                                {% else %}
                                <p class="card-text text-muted">–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    {% if session.is_admin %}
                    <div class="mt-4">
                        <h5>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                        <div class="btn-group" role="group">
                            <a href="{{ url_for('edit_product', id=product.id) }}" class="btn btn-warning">
                                <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </a>
                            <a href="{{ url_for('delete_product', id=product.id) }}" 
                               class="btn btn-danger"
                               onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä \"{{ product.name }}\"?')">
                                <i class="bi bi-trash"></i> –£–¥–∞–ª–∏—Ç—å
                            </a>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–∞</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            ID —Ç–æ–≤–∞—Ä–∞
                            <span class="badge bg-primary rounded-pill">{{ product.id }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                            <span class="badge bg-info rounded-pill">
                                {{ product.category.name if product.category else '–ù–µ—Ç' }}
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                            <small>{{ product.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –ü—Ä–æ—Å–º–æ—Ç—Ä—ã
                            <span class="badge bg-warning rounded-pill">{{ product.views_count }}</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">üí° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="{{ url_for('search') }}" class="btn btn-outline-primary">
                            <i class="bi bi-search"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∏—Å–∫—É
                        </a>
                        {% if session.is_admin %}
                        <a href="{{ url_for('admin') }}" class="btn btn-outline-warning">
                            <i class="bi bi-gear"></i> –í –∞–¥–º–∏–Ω–∫—É
                        </a>
                        {% endif %}
                        <button type="button" class="btn btn-outline-info" onclick="window.print()">
                            <i class="bi bi-printer"></i> –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å
                        </button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">‚ö†Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                </div>
                <div class="card-body">
                    <small class="text-muted">
                        <p><i class="bi bi-info-circle"></i> –í—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–º</p>
                        <p><i class="bi bi-shield-check"></i> –¢–æ–≤–∞—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞</p>
                        <p><i class="bi bi-clock-history"></i> –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö: –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        border: none;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-radius: 10px;
    }
    .card-header {
        border-radius: 10px 10px 0 0 !important;
        padding: 1rem 1.25rem;
    }
    .breadcrumb {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 0.75rem 1rem;
    }
    pre {
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid #e9ecef;
    }
    .badge {
        font-size: 0.9em;
    }
</style>
{% endblock %}